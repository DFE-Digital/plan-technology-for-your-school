@model Dfe.PlanTech.Web.Models.RecommendationsViewModel
@section Header {
    <link rel="stylesheet" href="~/css/step-by-step.css">
}

@{
    IEnumerable<Dfe.PlanTech.Domain.Questionnaire.Interfaces.IHeaderWithContent> content =
    [Model.RecommendationIntro, .. Model.RecommendationChunks];

    Dfe.PlanTech.Domain.Content.Models.Accordion[] accordions = [new Dfe.PlanTech.Domain.Content.Models.Accordion() {
Title = Model.RecommendationIntro.Header.Text,
Order = 1,
Header = Model.RecommendationIntro.Header.Text
}, .. Model.RecommendationChunks.Select((chunk, index) => new Dfe.PlanTech.Domain.Content.Models.Accordion() {
Title = chunk.Title,
Header = chunk.Header.Text,
Order = index + 2
})];

}
<div class="govuk-grid-row" id="top">
    @{
        await Html.RenderPartialAsync("BackButton");
    }
    <div class="app-step-nav-header">
        <span class="app-step-nav-header__part-of">Part of</span>
        <a class="app-step-nav-header__title" href="/self-assessment#recommendations-section">
            @Model.SectionName
        </a>
    </div>
    <div class="govuk-grid-column-two-thirds recommendation-content">
        <partial name="RecommendationContent" model="@content" />
    </div>
    <div class="govuk-grid-column-one-thirds">

        <div class="app-step-nav-related app-step-nav-related--singular">
            <h2 class="app-step-nav-related__heading">
                <span class="app-step-nav-related__pretitle">Part of</span>
                <a href="/self-assessment#recommendations-section">
                    @Model.SectionName
                </a>
            </h2>
        </div>

        @await Component.InvokeAsync("Accordion", accordions)

    </div>
</div>

@section BodyEnd {
    @{
        <script src="/js/step-by-step-navigation.js"></script>
        <script src="/js/step-by-step-polyfills.js"></script>
        <script type="module">
            var $element = document.querySelector('#step-by-step-navigation')
            var stepByStepNavigation = new GOVUK.Modules.AppStepNav($element).init()
        </script>
    }
}